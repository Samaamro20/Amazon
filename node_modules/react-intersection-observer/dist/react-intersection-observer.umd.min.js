!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactIntersectionObserver={},e.React)}(this,function(e,c){"use strict";function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(e,t,n,r,o,i,s,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[n,r,o,i,s,a],d=0;(c=new Error(t.replace(/%s/g,function(){return h[d++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}},l=new Map,f=new Map,p=new Map,v=0;function a(e,t,n){void 0===n&&(n={}),n.threshold||(n.threshold=0);var r=n,o=r.root,i=r.rootMargin,s=r.threshold;if(u(!l.has(e),"react-intersection-observer: Trying to observe %s, but it's already being observed by another instance.\nMake sure the `ref` is only used by a single <Observer /> instance.\n\n%s",e),e){var a,c=((a=o)?p.has(a)?p.get(a):(v+=1,p.set(a,v.toString()),p.get(a)+"_"):"")+(i?s.toString()+"_"+i:s.toString()),h=f.get(c);h||(h=new IntersectionObserver(g,n),c&&f.set(c,h));var d={callback:t,element:e,inView:!1,observerId:c,observer:h,thresholds:h.thresholds||(Array.isArray(s)?s:[s])};return l.set(e,d),h.observe(e),d}}function d(n){if(n){var e=l.get(n);if(e){var r=e.observerId,t=e.observer,o=t.root;t.unobserve(n);var i=!1,s=!1;r&&l.forEach(function(e,t){t!==n&&(e.observerId===r&&(s=i=!0),e.observer.root===o&&(s=!0))}),!s&&o&&p.delete(o),t&&!i&&t.disconnect(),l.delete(n)}}}function g(e){e.forEach(function(e){var t=e.isIntersecting,n=e.intersectionRatio,r=e.target,o=l.get(r);if(o&&0<=n){var i=o.thresholds.some(function(e){return o.inView?e<n:e<=n});void 0!==t&&(i=i&&t),o.inView=i,o.callback(i,e)}})}var t=function(o){var e,t;function n(){for(var n,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return s(i(n=o.call.apply(o,[this].concat(t))||this),"state",{inView:!1,entry:void 0}),s(i(n),"node",null),s(i(n),"handleNode",function(e){n.node&&d(n.node),n.node=e||null,n.observeNode()}),s(i(n),"handleChange",function(e,t){(e!==n.state.inView||e)&&n.setState({inView:e,entry:t}),n.props.onChange&&n.props.onChange(e,t)}),n}t=o,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=n.prototype;return r.componentDidMount=function(){},r.componentDidUpdate=function(e,t){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||(d(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&(d(this.node),this.node=null)},r.componentWillUnmount=function(){this.node&&(d(this.node),this.node=null)},r.observeNode=function(){if(this.node){var e=this.props,t=e.threshold,n=e.root,r=e.rootMargin;a(this.node,this.handleChange,{threshold:t,root:n,rootMargin:r})}},r.render=function(){var e=this.state,t=e.inView,n=e.entry;if("function"==typeof this.props.children)return this.props.children({inView:t,entry:n,ref:this.handleNode});var r=this.props,o=r.children,i=r.as,s=r.tag,a=(r.triggerOnce,r.threshold,r.root,r.rootMargin,function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(r,["children","as","tag","triggerOnce","threshold","root","rootMargin"]));return c.createElement(i||s||"div",h({ref:this.handleNode},a),o)},n}(c.Component);s(t,"displayName","InView"),s(t,"defaultProps",{threshold:0,triggerOnce:!1}),e.default=t,e.InView=t,e.useInView=function(n){void 0===n&&(n={});var e=c.useState(null),r=e[0],t=e[1],o=c.useState({inView:!1,entry:void 0}),i=o[0],s=o[1];return c.useEffect(function(){if(r)return a(r,function(e,t){s({inView:e,entry:t}),e&&n.triggerOnce&&d(r)},n),function(){d(r)}},[r,n.threshold,n.root,n.rootMargin,n.triggerOnce]),c.useDebugValue(i.inView),[t,i.inView,i.entry]},Object.defineProperty(e,"__esModule",{value:!0})});
